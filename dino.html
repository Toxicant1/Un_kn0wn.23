<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Bio-Luminescent Apex Dragon</title>
<style>
  body { margin: 0; background: #000; overflow: hidden; touch-action: none; }
  canvas { display: block; filter: contrast(110%) brightness(110%); }
</style>
</head>
<body>
<canvas id="c"></canvas>

<script>
const canvas = document.getElementById("c");
const ctx = canvas.getContext("2d");

let w, h, tx = 0, ty = 0, time = 0;
const SEGMENTS = 60;
const LENGTH = 10;
const dragon = [];

function resize() {
  w = canvas.width = window.innerWidth;
  h = canvas.height = window.innerHeight;
}
window.addEventListener("resize", resize);
resize();

tx = w / 2; ty = h / 2;
for (let i = 0; i < SEGMENTS; i++) {
  dragon.push({ x: tx, y: ty, a: 0 });
}

window.addEventListener("mousemove", e => { tx = e.clientX; ty = e.clientY; });
window.addEventListener("touchmove", e => { tx = e.touches[0].clientX; ty = e.touches[0].clientY; });

function loop() {
  requestAnimationFrame(loop);
  time += 0.04;

  // Deep shadow background
  ctx.fillStyle = "rgba(0, 8, 5, 0.2)";
  ctx.fillRect(0, 0, w, h);

  // Smooth Head Follow
  dragon[0].x += (tx - dragon[0].x) * 0.08;
  dragon[0].y += (ty - dragon[0].y) * 0.08;

  for (let i = 1; i < SEGMENTS; i++) {
    const p = dragon[i - 1];
    const s = dragon[i];
    const dx = p.x - s.x;
    const dy = p.y - s.y;
    s.a = Math.atan2(dy, dx);
    s.x = p.x - Math.cos(s.a) * LENGTH;
    s.y = p.y - Math.sin(s.a) * LENGTH;

    // Draw legs before body (behind)
    if (i === 12 || i === 30) drawLegs(s, i);
    
    drawBody(s, i);
    if (i === 10) drawWings(s);
  }

  drawDragonHead(dragon[0]);
}

function drawBody(s, i) {
  const size = Math.sin((i / SEGMENTS) * Math.PI) * 15 + 2;
  ctx.save();
  ctx.translate(s.x, s.y);
  ctx.rotate(s.a);

  // Bio-luminescent green lighting
  const grad = ctx.createRadialGradient(0, -size/2, 0, 0, 0, size);
  grad.addColorStop(0, "#aaffaa"); 
  grad.addColorStop(0.3, "#0a331a");
  grad.addColorStop(1, "#000");

  ctx.shadowBlur = i < 20 ? 15 : 0;
  ctx.shadowColor = "rgba(0, 255, 100, 0.4)";
  
  ctx.fillStyle = grad;
  ctx.beginPath();
  ctx.ellipse(0, 0, size, size * 0.8, 0, 0, Math.PI * 2);
  ctx.fill();
  ctx.restore();
}

function drawLegs(s, index) {
  const stride = Math.sin(time * 3 + index);
  ctx.strokeStyle = "#0a2211";
  ctx.lineWidth = 5;
  
  for (let side of [-1, 1]) {
    ctx.save();
    ctx.translate(s.x, s.y);
    ctx.rotate(s.a);
    
    ctx.beginPath();
    ctx.moveTo(0, side * 5);
    // Shoulder to Knee
    const kx = Math.cos(stride) * 20;
    const ky = side * (25 + Math.sin(stride) * 10);
    ctx.lineTo(kx, ky);
    // Knee to Claw
    ctx.lineTo(kx + 10, ky + side * 5);
    ctx.stroke();
    
    // Glowing claws
    ctx.fillStyle = "#0f5";
    ctx.beginPath();
    ctx.arc(kx+10, ky + side * 5, 2, 0, 7);
    ctx.fill();
    ctx.restore();
  }
}

function drawWings(s) {
  const flap = Math.sin(time * 2) * 0.5;
  ctx.save();
  ctx.translate(s.x, s.y);
  ctx.rotate(s.a);
  ctx.lineWidth = 2;
  ctx.strokeStyle = "rgba(100, 255, 150, 0.2)";

  for (let side of [-1, 1]) {
    ctx.beginPath();
    ctx.moveTo(0, 0);
    ctx.bezierCurveTo(-20, side * 80 * flap, -80, side * 100, -40, side * 20);
    ctx.stroke();
  }
  ctx.restore();
}

function drawDragonHead(h) {
  ctx.save();
  ctx.translate(h.x, h.y);
  ctx.rotate(h.a);

  // Skull Structure
  ctx.shadowBlur = 20;
  ctx.shadowColor = "#0f8";
  ctx.fillStyle = "#05150a";
  
  ctx.beginPath();
  ctx.moveTo(-15, -12);
  ctx.bezierCurveTo(5, -25, 30, -15, 35, 0);   // Upper snout
  ctx.bezierCurveTo(35, 15, 10, 25, -15, 12); // Lower jaw
  ctx.closePath();
  ctx.fill();

  // Horns
  ctx.strokeStyle = "#fff";
  ctx.lineWidth = 2;
  for(let side of [-1, 1]) {
    ctx.beginPath();
    ctx.moveTo(-10, side * 8);
    ctx.quadraticCurveTo(-30, side * 25, -45, side * 15);
    ctx.stroke();
  }

  // Eyes with Spectacle-style reflection
  ctx.fillStyle = "#fff";
  ctx.shadowBlur = 15;
  ctx.beginPath();
  ctx.ellipse(15, -6, 5, 2.5, 0.2, 0, 7);
  ctx.ellipse(15, 6, 5, 2.5, -0.2, 0, 7);
  ctx.fill();

  // Pupil
  ctx.shadowBlur = 0;
  ctx.fillStyle = "#000";
  ctx.fillRect(16, -8, 2, 4);
  ctx.fillRect(16, 4, 2, 4);

  // Plasma Breath
  if (Math.random() > 0.3) {
    ctx.fillStyle = "#0f8";
    for(let i=0; i<5; i++) {
        ctx.beginPath();
        ctx.arc(35 + Math.random()*20, (Math.random()-0.5)*10, Math.random()*3, 0, 7);
        ctx.fill();
    }
  }

  ctx.restore();
}

loop();
</script>
</body>
</html>
